<div class="px-4">
  <div class="text-blue-800 font-bold text-xl mt-3" >CONSULTA - PÓLIZA</div>

  <div class="flex flex-col sm:flex-row">

    <form [formGroup]="form" (ngSubmit)="searchPolicy(form.value.policyId)" class="p-3 mt-5" style="background-color: #F2F2F2">
      <div class="filter-title">Filtro Consultar otra Poliza</div>
      <div class="mt-3 flex">
        <div class="mr-3">
          <mat-form-field color="accent" appearance="outline" class="w-full bg-transparente" style="font-size: small !important;">
            <mat-label>Póliza</mat-label>
            <input formControlName="policyId" matInput>
          </mat-form-field>
        </div>

        <div>
          <button mat-mini-fab color="primary" aria-label="Buscar" type="submit" [disabled]="!form.valid" >
            <mat-icon>search</mat-icon>
          </button>
        </div>
      </div>
    </form>

    <div class="sm:ml-auto sm:mt-10">
      <p class="text-blue-800 font-bold text-3xl px-5 mt-3">PÓLIZA: {{policyId}}</p>
    </div>
  </div>

  <div *ngIf="loading">
    <mat-spinner class="m-auto"></mat-spinner>
  </div>

  <div *ngIf="!loading" class="mt-5">
      <div class="w-full grid sm:grid-rows-2 background-gray px-10 py-4 border-r-blue-2" style="border-right-width: 50px">
        <div class="txt-blue grid grid-cols-1 sm:grid-cols-4">
          <div>
            <span class="font-bold" >Nombre del cliente de la póliza:</span> {{policyDetail.clientName}}
          </div>
          <div>
            <span class="font-bold" >Cantidad Asegurados:</span> {{policyDetail.cantidadAsegurados}}
          </div>
          <div>
            <span class="font-bold mr-2">Pago:</span> {{policyDetail.paymentCicle === 'P' ? 'Pendiente' : 'Pagado'}}
          </div>

          <div>
            <span class="font-bold" >Moneda:</span> {{policyDetail.currency}}$
          </div>

        </div>
        <div class="txt-blue mt-5 grid grid-cols-1 sm:grid-cols-4">
          <div>
            <span class="font-bold">Deducible:</span> {{policyDetail.deductible}}
          </div>
          <div>
            <span class="font-bold">Producto:</span> {{policyDetail.product}}
          </div>
          <div>
            <span class="font-bold">Ini. Vigencia:</span> {{policyDetail.initialDate}}
          </div>
          <div>
            <span class="font-bold">Fin. Vigencia:</span> {{policyDetail.endDate}}
          </div>
        <!--  <div>
            <span class="font-bold">Ramo:</span> {{policyDetail.branch}}
          </div>
          <div>
            <span class="font-bold" >Certificados:</span> {{policyDetail.certificates}}
          </div> -->
        </div>
      </div>
    </div>

  <div *ngIf="!loading" class="mt-5">
    <div>
      <span class="font-light">Lista de Asegurados</span>
    </div>

    <div>
      <div class="table-responsive policy-details-table">
        <table mat-table matSort [dataSource]="dataSource" class="mt-5 w-full dashboard-basic-table">

          <!-- Insured ID Column -->
          <ng-container matColumnDef="insuredId" style="margin-right: 15px !important">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> ID Asegurado </th>
            <td mat-cell *matCellDef="let element" id="insuredIdCell">{{element.insuredId}}</td>
          </ng-container>

          <!-- CERTIFICATE Column -->
          <ng-container matColumnDef="certificate" style="margin-right: 15px !important">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Certificado </th>
            <td mat-cell *matCellDef="let element"> {{element.certificates}} </td>
          </ng-container>

          <!-- FULL NAME Column -->
          <ng-container matColumnDef="fullName" style="margin-right: 15px !important">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Nombre y Apellido </th>
            <td mat-cell *matCellDef="let element"> {{element.fullName}} </td>
          </ng-container>

          <!-- VALIDITY Column -->
          <ng-container matColumnDef="validityDate" style="margin-right: 15px !important">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha Nacimiento </th>
            <td mat-cell *matCellDef="let element"> {{element.validityDate}} </td>
          </ng-container>

          <!-- KINSHIP Column -->
          <ng-container matColumnDef="kinship" style="margin-right: 15px !important">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Parentezco </th>
            <td mat-cell *matCellDef="let element"> {{element.kinship}} </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>

    </div>

  </div>

  <mat-paginator id="table-paginator" color="accent" class="dashboard-table-paginator" [pageSizeOptions]="[5, 10, 20]"
                 showFirstLastButtons></mat-paginator>

</div>
